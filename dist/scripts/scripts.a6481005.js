"use strict";angular.module("envConfig",[]).constant("ENV",{name:"Production",apiEndpoint:"//gh-web-services.herokuapp.com/inveo-api/"}),function(a){a.module("jcs-autoValidate",[])}(angular),function(a){a.module("jcs-autoValidate").provider("validator",[function(){var b={},c=!0,d=!0,e=!0,f=function(a){var b;return a&&0!==a.length?(b=a.toLowerCase(),a=!("f"===b||"0"===b||"false"===b)):a=!1,a},g=function(a,b){var c;return void 0!==a&&(c=a.attr(b)||a.attr("data-"+b)),c},h=function(a,b){var c;return void 0!==a&&(c=void 0!==a.attr(b)||void 0!==a.attr("data-"+b)),c},i=function(a,b){return f(g(a,b))},j=function(a){return c&&!i(a,"disable-valid-styling")},k=function(a){return d&&!i(a,"disable-invalid-styling")};this.enable=function(a){e=a},this.isEnabled=function(){return e},this.setDefaultElementModifier=function(a){if(void 0===b[a])throw new Error("Element modifier not registered: "+a);this.defaultElementModifier=a},this.registerDomModifier=function(a,c){b[a]=c},this.setErrorMessageResolver=function(a){this.errorMessageResolver=a},this.getErrorMessage=function(b,c){var d;if(void 0===this.errorMessageResolver)throw new Error("Please set an error message resolver via the setErrorMessageResolver function before attempting to resolve an error message.");return h(c,"disable-validation-message")?(d=a.injector(["ng"]).get("$q").defer(),d.resolve(""),d.promise):this.errorMessageResolver(b,c)},this.setValidElementStyling=function(a){c=a},this.setInvalidElementStyling=function(a){d=a},this.getDomModifier=function(a){var c=(void 0!==a?a.attr("element-modifier"):this.defaultElementModifier)||(void 0!==a?a.attr("data-element-modifier"):this.defaultElementModifier)||this.defaultElementModifier;if(void 0===c)throw new Error("Please set a default dom modifier via the setDefaultElementModifier method on the validator class.");return b[c]},this.makeValid=function(a){j(a)?this.getDomModifier(a).makeValid(a):this.makeDefault(a)},this.makeInvalid=function(a,b){k(a)?this.getDomModifier(a).makeInvalid(a,b):this.makeDefault(a)},this.makeDefault=function(a){var b=this.getDomModifier(a);b.makeDefault&&b.makeDefault(a)},this.defaultFormValidationOptions={forceValidation:!1,disabled:!1,validateNonVisibleControls:!1,removeExternalValidationErrorsOnSubmit:!0},this.$get=[function(){return this}]}])}(angular),function(a){a.module("jcs-autoValidate").factory("bootstrap3ElementModifier",["$log",function(b){var c=function(b){a.forEach(b.find("span"),function(b){b=a.element(b),(b.hasClass("error-msg")||b.hasClass("form-control-feedback")||b.hasClass("control-feedback"))&&b.remove()}),b.removeClass("has-success has-error has-feedback")},d=function(a,b){for(var c,d=a,e=0;10>=e;e+=1){if(void 0!==d&&d.hasClass(b)){c=d;break}void 0!==d&&(d=d.parent())}return c},e=function(b,c){for(var d,f=0;f<b.children.length&&(d=b.children[f],void 0===d||!a.element(d).hasClass(c))&&!(void 0!==d.children&&(d=e(d,c),d.length>0));f+=1);return a.element(d)},f=function(a){return d(a,"form-group")},g=function(a){return e(a,"input-group")},h=function(a,b){a[0].parentNode.insertBefore(b[0],a[0].nextSibling)},i=!1,j=function(a){i=a},k=function(d){var e,j=f(d);if(j){if(c(j),e=g(j[0]),j.addClass("has-success "+(e.length>0?"":"has-feedback")),i){var k='<span class="glyphicon glyphicon-ok form-control-feedback"></span>';e.length>0&&(k=k.replace("form-",""),k='<span class="input-group-addon control-feedback">'+k+"</span"),h(d,a.element(k))}}else b.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},l=function(d,e){var j,k=f(d),l=a.element('<span class="help-block has-error error-msg">'+e+"</span>");if(k){if(c(k),j=g(k[0]),k.addClass("has-error "+(j.length>0?"":"has-feedback")),h(j.length>0?j:d,l),i){var m='<span class="glyphicon glyphicon-remove form-control-feedback"></span>';j.length>0&&(m=m.replace("form-",""),m='<span class="input-group-addon control-feedback">'+m+"</span"),h(d,a.element(m))}}else b.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")},m=function(a){var d=f(a);d?c(d):b.error("Angular-auto-validate: invalid bs3 form structure elements must be wrapped by a form-group class")};return{makeValid:k,makeInvalid:l,makeDefault:m,enableValidationStateIcons:j,key:"bs3"}}])}(angular),function(a){a.module("jcs-autoValidate").factory("jcs-debounce",["$timeout",function(b){var c=function(c,d,e){d=a.isUndefined(d)?0:d,e=a.isUndefined(e)?!0:e;var f=0;return function(){var a=this,g=arguments;f+=1;var h=function(b){return function(){return b===f?c.apply(a,g):void 0}}(f);return b(h,d,e)}};return{debounce:c}}])}(angular),function(a,b){"format"in a.prototype||(a.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return void 0!==typeof a[c]?a[c]:b})}),b.autoValidate=b.autoValidate||{errorMessages:{}},b.autoValidate.errorMessages["en-us"]=b.autoValidate.errorMessages["en-gb"]={defaultMsg:"Please add error message for {0}",email:"Please enter a valid email address",minlength:"Please enter at least {0} characters",maxlength:"You have entered more than the maximum {0} characters",min:"Please enter the minimum number of {0}",max:"Please enter the maximum number of {0}",required:"This field is required",date:"Please enter a valid date",pattern:"Please ensure the entered information adheres to this pattern {0}",number:"Please enter a valid number",url:"Please enter a valid URL in the format of http(s)://www.google.com"},b.module("jcs-autoValidate").factory("defaultErrorMessageResolver",["$q","$http",function(a,c){var d,e="en-gb",f="js/angular-auto-validate/dist/lang",g=function(a){return d=c.get("{0}/jcs-auto-validate_{1}.json".format(f,a.toLowerCase()))},h=function(a){f=a},i=function(c,f){var h=a.defer();return f=f||g,e=c.toLowerCase(),void 0===b.autoValidate.errorMessages[e]?(d=f(c),d.then(function(a){d=void 0,b.autoValidate.errorMessages[e]=a.data,h.resolve(b.autoValidate.errorMessages[e])},function(a){b.autoValidate.errorMessages[e]={defaultMsg:"Loading culture failed!"},d=null,h.reject(a)})):h.resolve(b.autoValidate.errorMessages[e]),h.promise},j=function(c){var f=a.defer();return c=void 0===c?e:c.toLowerCase(),void 0!==d?d.then(function(){f.resolve(b.autoValidate.errorMessages[c])},function(a){f.reject(a)}):f.resolve(b.autoValidate.errorMessages[c]),f.promise},k=function(a,b){var c;return b&&(a+="-err-type",c=b.attr("ng-"+a),void 0===c&&(c=b.attr("data-ng-"+a)||b.attr(a)),c&&(c=c.replace(/[\W]/g,""))),c},l=function(c,f){var g,h,i,j=a.defer(),m=[];if(void 0!==d)d.then(function(){l(c,f).then(function(a){j.resolve(a)})});else{if(g=b.autoValidate.errorMessages[e][c],i=k(c,f),i&&(g=b.autoValidate.errorMessages[e][i]),void 0===g&&(g=b.autoValidate.errorMessages[e].defaultMsg.format(c)),f&&f.attr)try{h=f.attr("ng-"+c),void 0===h&&(h=f.attr("data-ng-"+c)||f.attr(c)),m.push(h||""),g=g.format(m)}catch(n){}j.resolve(g)}return j.promise};return{setI18nFileRootPath:h,setCulture:i,getErrorMessages:j,resolve:l}}])}(String,angular),function(a){a.module("jcs-autoValidate").factory("foundation5ElementModifier",[function(){var b=function(b,c){a.forEach(b.find("small"),function(b){a.element(b).hasClass("error")&&a.element(b).remove()}),c.removeClass("error")},c=function(a){for(var b=a,c=0;3>=c&&(void 0===b||!b.hasClass("columns"));c+=1)void 0!==b&&(b=b.parent());return b},d=function(a){var d=c(a);b(d&&d.length>0?d:a,a)},e=function(d,e){var f,g=c(d);b(g||d,d),d.addClass("error"),g&&(f=a.element('<small class="error">'+e+"</small>"),g.append(f))},f=function(a){d(a)};return{makeValid:d,makeInvalid:e,makeDefault:f,key:"foundation5"}}])}(angular),function(a){a.module("jcs-autoValidate").factory("jcs-elementUtils",[function(){var a=function(a){return a[0].offsetWidth>0&&a[0].offsetHeight>0};return{isElementVisible:a}}]),a.module("jcs-autoValidate").factory("validationManager",["validator","jcs-elementUtils",function(b,c){var d=["input","textarea","select","form"],e=function(a){return c.isElementVisible(a)},f=function(c){var d=a.element(c).controller("form");return void 0!==d&&null!==d?d.autoValidateFormOptions:b.defaultFormValidationOptions},g=function(a,b){var c=a&&a.length>0&&(e(a)||b.validateNonVisibleControls)&&(d.indexOf(a[0].nodeName.toLowerCase())>-1||a[0].hasAttribute("register-custom-form-control"));return c},h=function(c,d,e){var h,i=!0,j=e||f(d),k=c.$pristine===!1||j.forceValidation,l=function(b){var c,d=!0;return a.forEach(b,function(a,b){d&&a&&(d=!1,c=b)}),c};return j.disabled===!1&&(j.forceValidation||g(d,j)&&c&&k)&&(i=!c.$invalid,j.removeExternalValidationErrorsOnSubmit&&c.removeAllExternalValidation&&c.removeAllExternalValidation(),i?b.makeValid(d):(h=l(c.$errors||c.$error),void 0===h?i=!0:b.getErrorMessage(h,d).then(function(a){b.makeInvalid(d,a)}))),i},i=function(a){b.makeDefault(a)},j=function(b){a.forEach(b[0].all||b[0].elements||b[0],function(b){var c,d=a.element(b);c=d.controller("ngModel"),void 0!==c&&("form"===d[0].nodeName.toLowerCase()?j(d):c.$setPristine())})},k=function(b){var c,d=!0,e=b?a.element(b).controller("form"):void 0,i=function(b,c,e){var i,j,l;b=a.element(b),i=b.controller("ngModel"),void 0!==i&&(c||g(b,e))&&("form"===b[0].nodeName.toLowerCase()?k(b):(l=f(b),l.forceValidation=c,j=h(i,b,l),d=d&&j))};return void 0===b||void 0!==e&&e.autoValidateFormOptions.disabled?void 0!==b:(c=a.copy(e.autoValidateFormOptions),c.forceValidation=!0,a.forEach(b[0].all||b[0].elements||b[0],function(a){i(a,!0,c)}),b[0].customHTMLFormControlsCollection&&a.forEach(b[0].customHTMLFormControlsCollection,function(a){i(a,!0,c)}),d)},l=function(a,c,d){c?b.getErrorMessage(c,a).then(function(c){b.makeInvalid(a,c)}):b.makeInvalid(a,d)};return{setElementValidationError:l,validateElement:h,validateForm:k,resetElement:i,resetForm:j}}])}(angular),function(a){function b(a){return void 0!==a&&"false"!==a}function c(c,d,e){var f=c.autoValidateFormOptions=c.autoValidateFormOptions||a.copy(d.defaultFormValidationOptions);f.forceValidation=!1,f.disabled=!d.isEnabled()||b(e.disableDynamicValidation),f.validateNonVisibleControls=b(e.validateNonVisibleControls),f.removeExternalValidationErrorsOnSubmit=void 0===e.removeExternalValidationErrorsOnSubmit?!0:b(e.removeExternalValidationErrorsOnSubmit),d.isEnabled()===!1&&b(e.disableDynamicValidation)===!1&&(f.disabled=!1)}a.module("jcs-autoValidate").directive("form",["validator",function(a){return{restrict:"E",require:"form",priority:9999,compile:function(){return{pre:function(b,d,e,f){c(f,a,e)}}}}}]),a.module("jcs-autoValidate").directive("ngForm",["validator",function(a){return{restrict:"EA",require:"form",priority:9999,compile:function(){return{pre:function(b,d,e,f){c(f,a,e)}}}}}])}(angular),function(a){a.module("jcs-autoValidate").directive("form",["validationManager",function(a){return{restrict:"E",link:function(b,c){var d=c.controller("form");void 0!==d&&d.autoValidateFormOptions&&d.autoValidateFormOptions.disabled===!1&&(c.on("reset",function(){a.resetForm(c)}),b.$on("$destroy",function(){c.off("reset")}))}}}])}(angular),function(a){a.module("jcs-autoValidate").directive("registerCustomFormControl",[function(){var b=function(b){for(var c=b,d=0;50>=d&&(void 0===c||"form"!==c.nodeName.toLowerCase());d+=1)void 0!==c&&(c=a.element(c).parent()[0]);return c};return{restrict:"A",link:function(a,c){var d=b(c.parent()[0]);d&&(d.customHTMLFormControlsCollection=d.customHTMLFormControlsCollection||[],d.customHTMLFormControlsCollection.push(c[0]))}}}])}(angular),function(a){a.module("jcs-autoValidate").config(["$provide",function(a){a.decorator("ngSubmitDirective",["$delegate","$parse","validationManager",function(a,b,c){return a[0].compile=function(a,d){var e=b(d.ngSubmit),f="true"===d.ngSubmitForce;return function(b,d){function g(g){b.$apply(function(){var h=a.controller("form");void 0!==h&&null!==h&&h.autoValidateFormOptions&&h.autoValidateFormOptions.disabled===!0?e(b,{$event:g}):(c.validateForm(d)||f===!0)&&e(b,{$event:g})})}d.on("submit",g),b.$on("$destroy",function(){d.off("submit",g)})}},a}])}])}(angular),function(a){a.module("jcs-autoValidate").config(["$provide",function(b){b.decorator("ngModelDirective",["$timeout","$delegate","validationManager","jcs-debounce",function(b,c,d,e){var f=c[0],g=f.link||f.compile;return f.compile=function(b){return function(c,f,h,i){var j=i[0],k=i[1],l=a.version.major>=1&&a.version.minor>=3,m=void 0===h.ngModelOptions?void 0:c.$eval(h.ngModelOptions),n=j.$setValidity,o=j.$setPristine,p=e.debounce(function(){var a=void 0!==k&&null!==k?k.autoValidateFormOptions:void 0;d.validateElement(j,f,a)},100);l&&a.isFunction(g)&&(g=g(b)),g.pre&&(g.pre.apply(this,arguments),m=void 0===j.$options?void 0:j.$options),void 0===h.formnovalidate&&void 0!==k&&null!==k&&k.autoValidateFormOptions&&k.autoValidateFormOptions.disabled===!1&&(l||void 0===m||void 0===m.updateOn||""===m.updateOn?j.$setValidity=function(a,b){n.call(j,a,b),p()}:(f.on(m.updateOn,function(){p()}),c.$on("$destroy",function(){f.off(m.updateOn)})),j.$setPristine=function(){o.call(j),d.resetElement(f)},j.autoValidated=!0),g.post?g.post.apply(this,arguments):g.apply(this,arguments),j.setExternalValidation=function(a,b,c){if(c){var e=j.$error||j.$errors;e[a]=!1}j.externalErrors=j.externalErrors||{},j.externalErrors[a]=!1,d.setElementValidationError(f,a,b)},j.removeExternalValidation=function(a,b){if(b){var c=j.$error||j.$errors;c[a]=!0}j.externalErrors&&delete j.externalErrors[a],d.resetElement(f)},j.removeAllExternalValidation=function(){if(j.externalErrors){var b=j.$error||j.$errors;a.forEach(j.externalErrors,function(a,c){delete b[c]}),j.externalErrors={},d.resetElement(f)}},k&&(k.setExternalValidation=function(a,b,c,d){var e=!1;return k[a]&&(k[a].setExternalValidation(b,c,d),e=!0),e},k.removeExternalValidation=function(a,b,c,d){var e=!1;return k[a]&&(k[a].removeExternalValidation(b,d),e=!0),e})}},c}])}])}(angular),function(a){a.module("jcs-autoValidate").run(["validator","defaultErrorMessageResolver","bootstrap3ElementModifier","foundation5ElementModifier",function(a,b,c,d){a.setErrorMessageResolver(b.resolve),a.registerDomModifier(c.key,c),a.registerDomModifier(d.key,d),a.setDefaultElementModifier(c.key)}])}(angular),angular.module("ghAngularApp",["ngResource","ngSanitize","ngTouch","envConfig","ui.router","esri.map","toaster","ui.bootstrap","ui.select","jcs-autoValidate"]),angular.module("ghAngularApp").config(["$stateProvider","$urlRouterProvider","ENV","$httpProvider","uiSelectConfig",function(a,b,c,d,e){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/home.html",controller:"HomeCtrl as ctrl",resolve:{municipalities:["Courts",function(a){return a.findAll()}]}}).state("citationInfo",{url:"/ticketInfo",templateUrl:"views/citationInfo.html",controller:"citationInfoCtrl as ctrl",params:{citations:{value:void 0}},resolve:{citations:["$stateParams",function(a){return a.citations}]}}).state("paymentOptions",{url:"/paymentOptions",templateUrl:"views/paymentOptions.html",controller:"PaymentOptionsCtrl as ctrl"}).state("opportunityDetails",{url:"/opportunityDetails",templateUrl:"views/opportunityDetails.html",controller:"OpportunityDetailsCtrl as ctrl"}).state("sponsorLogin",{url:"/sponsorLogin",templateUrl:"views/sponsorLogin.html",controller:"SponsorLoginCtrl as ctrl"}).state("sponsorMgmt",{url:"/sponsorMgmt",templateUrl:"views/sponsorManagement.html",controller:"SponsorMgmtCtrl as ctrl",resolve:{opportunities:["Opportunities","Auth",function(a,b){return a.findBySponsorId(b.getAuthenticatedSponsor().id)}],courts:["Courts",function(a){return a.findAll()}]}}),d.interceptors.push(function(){return{request:function(a){return a.url.indexOf(".html")<0&&(a.url=c.apiEndpoint+a.url),a}}}),e.theme="bootstrap",e.resetSearchInput=!0,e.closeOnSelect=!0,e.searchEnabled=!0}]),angular.module("ghAngularApp").run(["validator","validationElementModifier","errorMessageResolver",function(a,b,c){a.registerDomModifier(b.key,b),a.setDefaultElementModifier(b.key),a.setValidElementStyling(!1),a.setErrorMessageResolver(c.resolve)}]),angular.module("ghAngularApp").controller("HomeCtrl",["Citations","toaster","States","municipalities","$modal","$state",function(a,b,c,d,e,f){function g(){h.citationCriteria={citationNumber:null,licenseNumber:null,licenseState:"MO",firstName:null,lastName:null,municipalityNames:null,dob:null}}var h=this;h.states=c,h.municipalities=d,h.citationCriteria={},h.hasEverSelected=!1;var i={TICKET_NUMBER:!1,DRIVER_INFO:!1,LOCATION:!1};h.isUnselected=function(a){return!i[a]&&h.hasEverSelected},h.isSelected=function(a){return i[a]},h.getTicketWithNumber=function(){g(),h.hasEverSelected=!0,i.TICKET_NUMBER=!0,i.DRIVER_INFO=!1,i.LOCATION=!1},h.getTicketWithDriverInfo=function(){g(),h.hasEverSelected=!0,i.TICKET_NUMBER=!1,i.DRIVER_INFO=!0,i.LOCATION=!1},h.getTicketWithLocation=function(){g(),h.hasEverSelected=!0,i.TICKET_NUMBER=!1,i.DRIVER_INFO=!1,i.LOCATION=!0},h.getDOB=function(a){if(a.$valid){var c=e.open({templateUrl:"views/dobPicker.html",controller:"dobPickerCtrl as ctrl",size:"sm"});c.result.then(function(a){h.citationCriteria.dob=a,h.findTicket()})}else b.pop("error","Please provide the required information")},h.findTicket=function(){var c={dob:h.citationCriteria.dob};if(i.TICKET_NUMBER)c.citationNumber=h.citationCriteria.citationNumber;else if(i.DRIVER_INFO)c.licenseNumber=h.citationCriteria.licenseNumber,c.licenseState=h.citationCriteria.licenseState;else if(i.LOCATION){var d=[];h.citationCriteria.municipalityNames.forEach(function(a){d.push(a.municipality)}),c.municipalityNames=d,c.lastName=h.citationCriteria.lastName}a.find(c).then(function(a){a.citations.length>0?f.go("citationInfo",{citations:a.citations}):b.pop("error","Oh no! There were no tickets matching your criteria")},function(){b.pop("error","Oh no! We couldn't get your ticket information!")})},h.openMap=function(){h.citationCriteria.municipalityNames=null;var a=e.open({templateUrl:"views/locationPickerMap.html",controller:"locationPickerMapCtrl as ctrl",size:"md",resolve:{municipalities:function(){return h.municipalities}}});a.result.then(function(a){h.citationCriteria.municipalityNames=a})},g()}]),angular.module("ghAngularApp").controller("HeaderCtrl",["Auth",function(a){var b=this;b.isAuthenticated=function(){return a.isAuthenticated()},b.getAuthenticatedSponsor=function(){return a.getAuthenticatedSponsor()},b.logout=function(){a.logout()}}]),angular.module("ghAngularApp").controller("locationPickerMapCtrl",["$scope","esriRegistry","$modalInstance","municipalities",function(a,b,c,d){function e(a,b){f.selectedMunicipalities=[];var c=new esri.tasks.Query;console.log(c);var e=a.extent.getWidth()/a.width*5,g=b.mapPoint.x,h=b.mapPoint.y,i=new esri.geometry.Extent(g-e,h-e,g+e,h+e,b.mapPoint.spatialReference);c.geometry=i;var j=a.getLayer(a.graphicsLayerIds[0]);j.queryFeatures(c,function(a){a.features.forEach(function(a){d.every(function(b){return b.municipality.toLowerCase()===a.attributes.MUNICIPALITY.toLowerCase()?(f.selectedMunicipalities.push(b),!1):!0})})})}var f=this;f.selectedMunicipalities=[],f.map={options:{basemap:"streets",center:[-90.381801,38.668909],zoom:10,sliderStyle:"small"}},b.get("stlMap").then(function(b){b.on("click",function(c){a.$apply(e.bind(null,b,c))})}),f.selectLocation=function(){c.close(f.selectedMunicipalities)},f.cancel=function(){c.dismiss()}}]),angular.module("ghAngularApp").controller("dobPickerCtrl",["$modalInstance","DateFormatter",function(a,b){var c=this;c.dob=null,c.minDate=new Date(1900,0,1),c.maxDate=new Date,c.status={opened:!1},c.open=function(){c.status.opened=!0},c.save=function(){a.close(b.format(c.dob,"mm/dd/yyyy"))},c.cancel=function(){a.dismiss()}}]),angular.module("ghAngularApp").controller("citationInfoCtrl",["$state","citations","Courts",function(a,b,c){function d(a){var b=a.court.address.replace(" ","+"),c=a.court.city,d=a.court.state,e=a.court.zip_code,f=[b,c,d,e];return"https://maps.google.com?saddr=Current+Location&daddr="+f.join("+")}var e=this;e.selectCitation=function(a){e.selectedCitation=a,c.findById(a.court_id).then(function(a){e.selectedCitation.court=a,e.selectedCitation.courtDirectionLink=d(e.selectedCitation)})},b?(e.citations=b,e.selectedCitation=null,1===e.citations.length&&e.selectCitation(e.citations[0])):a.go("home"),e.citationSelected=function(a){return a===e.selectedCitation},e.isMissingFineInfo=function(a){var b=!1;return a.violations.forEach(function(a){a.fine_amount||(b=!0)}),b},e.isMissingFeeInfo=function(a){var b=!1;return a.violations.forEach(function(a){a.court_cost||(b=!0)}),b},e.getFineTotal=function(a){var b=0;return a.violations.forEach(function(a){b+=a.fine_amount}),b.toFixed(2)},e.getFeeTotal=function(a){var b=0;return a.violations.forEach(function(a){b+=a.court_cost}),b.toFixed(2)},e.hasViolations=function(a){return a.violations.length>0},e.goToPaymentOptions=function(){a.go("paymentOptions")}}]),angular.module("ghAngularApp").controller("OpportunityDetailsCtrl",function(){}),angular.module("ghAngularApp").controller("PaymentOptionsCtrl",function(){}),angular.module("ghAngularApp").controller("SponsorLoginCtrl",["$state","toaster","Sponsor","Auth",function(a,b,c,d){var e=this;d.isAuthenticated()&&a.go("sponsorMgmt"),e.credentials={},e.credentials.userId="",e.credentials.password="",e.DoSponsorLogin=function(f){f.$valid?c.Login(e.credentials).then(function(c){d.authenticate(c.data),b.pop("success","Welcome back "+c.data.name),a.go("sponsorMgmt")},function(){b.pop("error","There was an error logging in.")}):b.pop("error","Please provide the required information")}}]),angular.module("ghAngularApp").controller("SponsorMgmtCtrl",["$state","Sponsor","Auth","opportunities","courts","Opportunities","toaster","$modal",function(a,b,c,d,e,f,g,h){function i(){f.findBySponsorId(j.sponsor.id).then(function(a){j.opportunities=a},function(){g.pop("error","There was an error refreshing opportunities")})}var j=this;c.isAuthenticated()?(j.sponsor=c.getAuthenticatedSponsor(),j.opportunities=d,j.courts=e):a.go("sponsorLogin"),j.createOpportunity=function(){var a=h.open({templateUrl:"views/opportunityCreate.html",controller:"OpportunityCreateCtrl as ctrl",size:"md",resolve:{courts:function(){return j.courts}}});a.result.then(function(){i()})},j.addNeed=function(a){},j.getCourtName=function(a){var b="Court Name Unavailable";return e.every(function(c){return a.courtId===c.id?(b=c.municipality,!1):!0}),b}}]),angular.module("ghAngularApp").controller("OpportunityCreateCtrl",["$modalInstance","toaster","Opportunities","Auth","courts",function(a,b,c,d,e){var f=this;f.municipalities=e,f.opportunity={name:null,shortDescription:null,fullDescription:null,sponsorId:d.getAuthenticatedSponsor().id,courtId:null},f.save=function(d){d.$valid?c.create(f.opportunity).then(function(){b.pop("success","Opportunity was created"),a.close(f.opportunity)},function(){b.pop("error","There was an error trying to create your opportunity")}):b.pop("error","Please correct the indicated errors and try again")},f.cancel=function(){a.dismiss()}}]),angular.module("ghAngularApp").factory("Auth",["$state",function(a){function b(a){localStorage.setItem("sponsor",JSON.stringify(a))}function c(){return JSON.parse(localStorage.getItem("sponsor"))}function d(){return!!localStorage.getItem("sponsor")}function e(){localStorage.removeItem("sponsor"),a.go("sponsorLogin")}var f={authenticate:b,getAuthenticatedSponsor:c,isAuthenticated:d,logout:e};return f}]),angular.module("ghAngularApp").factory("Citations",["$resource",function(a){function b(a){return c.get(a).$promise}var c=a("citations/:id"),d={find:b};return d}]),angular.module("ghAngularApp").factory("Courts",["$resource","$q",function(a,b){function c(a){return f.get({id:a}).$promise}function d(){return e?b.when(e):f.get().$promise.then(function(a){return e=a.courts,a.courts})}var e,f=a("courts/:id"),g={findById:c,findAll:d};return g}]),angular.module("ghAngularApp").factory("Opportunities",["$resource",function(a){function b(a){return e.get({sponsorId:a}).$promise.then(function(a){return a.opportunities})}function c(a){return e.get({id:a}).$promise}function d(a){return e.save(a).$promise}var e=a("opportunities/:id"),f={findById:c,findBySponsorId:b,create:d};return f}]),angular.module("ghAngularApp").factory("Sponsor",["$http",function(a){function b(b){return a.post("sponsors/login",b)}return{Login:b}}]),angular.module("ghAngularApp").factory("States",function(){return["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FM","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MH","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VI","VA","WA","WV","WI","WY"]}),angular.module("ghAngularApp").factory("DateFormatter",function(){function a(a,c,d){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,h=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},i=b;if(1!==arguments.length||"[object String]"!==Object.prototype.toString.call(a)||/\d/.test(a)||(c=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");c=String(i.masks[c]||c||i.masks["default"]),"UTC:"===c.slice(0,4)&&(c=c.slice(4),d=!0);var j=d?"getUTC":"get",k=a[j+"Date"](),l=a[j+"Day"](),m=a[j+"Month"](),n=a[j+"FullYear"](),o=a[j+"Hours"](),p=a[j+"Minutes"](),q=a[j+"Seconds"](),r=a[j+"Milliseconds"](),s=d?0:a.getTimezoneOffset(),t={d:k,dd:h(k),ddd:i.i18n.dayNames[l],dddd:i.i18n.dayNames[l+7],m:m+1,mm:h(m+1),mmm:i.i18n.monthNames[m],mmmm:i.i18n.monthNames[m+12],yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:h(o%12||12),H:o,HH:h(o),M:p,MM:h(p),s:q,ss:h(q),l:h(r,3),L:h(r>99?Math.round(r/10):r),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:d?"UTC":(String(a).match(f)||[""]).pop().replace(g,""),o:(s>0?"-":"+")+h(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][k%10>3?0:(k%100-k%10!=10)*k%10]};return c.replace(e,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}var b={masks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},c={format:a};return c}),angular.module("ghAngularApp").factory("errorMessageResolver",["$q",function(a){"errorFormat"in String.prototype||(String.prototype.errorFormat=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return void 0!==typeof a[c]?a[c]:b})});var b={defaultMsg:"This field is invalid",email:"Email address is not valid",minlength:"{0} must be at least {1} characters long",maxlength:"{0} cannot exceed {1} characters",min:"{0} must be at least {1}",max:"{0} cannot be larger than {1}",required:"{0} is required",date:"Date is invalid",pattern:"{0} format is invalid",number:"{0} must be a valid number",url:"{0} must be a valid URL in the format of http(s)://wwww.google.com"},c=function(c,d){var e=a.defer(),f=b[c];if(void 0===f&&(f=b.defaultMsg.errorFormat(c)),d&&d.attr)try{var g=d.attr("displayName"),h=d.attr("ng-"+c);void 0===h&&(h=d.attr("data-ng-"+c)||d.attr(c)),f=f.errorFormat(g,h)}catch(i){throw new Error("An error occurred trying to resolve the error message")}return e.resolve(f),e.promise};return{resolve:c}}]),angular.module("ghAngularApp").factory("validationElementModifier",function(){var a=function(a){angular.forEach(a.find("span.help-block"),function(a){a=angular.element(a),(a.hasClass("error-msg")||a.hasClass("form-control-feedback")||a.hasClass("control-feedback"))&&(a.removeClass("error-msg has-error form-control-feedback control-feedback"),a.text(""))}),a.removeClass("has-success has-error has-feedback")},b=function(a,b){for(var c=a,d=0;3>=d&&(void 0===c||!c.hasClass(b));d+=1)void 0!==c&&(c=c.parent());return c},c=function(a,b){for(var d,e=0;e<a.children.length&&(d=a.children[e],void 0===d||!angular.element(d).hasClass(b))&&!(void 0!==d.children&&(d=c(d,b),d.length>0));e+=1);return angular.element(d)},d=function(a){return b(a,"form-group")},e=function(a){return c(a,"input-group")},f=function(a,b){a[0].parentNode.insertBefore(b[0],a[0].nextSibling)},g=!1,h=function(a){g=a},i=function(b){var c=d(b),h=e(c[0]);if(a(c),c.addClass("has-success "+(h.length>0?"":"has-feedback")),g){var i='<span class="glyphicon glyphicon-ok form-control-feedback"></span>';h.length>0&&(i=i.replace("form-",""),i='<span class="input-group-addon control-feedback">'+i+"</span"),f(b,angular.element(i))}},j=function(b,c){var h=d(b),i=e(h[0]),j=h.find("span.help-block");if(a(h,i),j.text(c),j.addClass("has-error error-msg"),h.addClass("has-error "+(i.length>0?"":"has-feedback")),g){var k='<span class="glyphicon glyphicon-remove form-control-feedback"></span>';i.length>0&&(k=k.replace("form-",""),k='<span class="input-group-addon control-feedback">'+k+"</span"),f(b,angular.element(k))}},k=function(b){var c=d(b);a(c)};return{makeValid:i,makeInvalid:j,makeDefault:k,enableValidationStateIcons:h,key:"inveo"}}),angular.module("ghAngularApp").directive("formField",function(){return{restrict:"E",require:"^form",replace:!0,transclude:!0,templateUrl:"views/formField.html",scope:{info:"@?"},link:function(a,b,c){a.label=c.label,a.required=c.hasOwnProperty("required");var d=b.find("textarea, input:not(.ui-select-search)").filter("[type='text'], [type='email'], [type='password'], [type='number'],:not([type])");d.addClass("form-control"),a.id=d.attr("id")}}}),angular.module("ghAngularApp").directive("ngTranscludeReplace",[function(){return{terminal:!0,restrict:"EA",link:function(a,b,c,d,e){e&&e(function(a){a.length?b.replaceWith(a):b.remove()})}}}]),angular.module("ghAngularApp").directive("layout",function(){return{restrict:"A",link:function(a,b){a.$on("$stateChangeStart",function(a,c,d,e,f){"home"===c.name?b.addClass("background"):b.removeClass("background")})}}}),angular.module("ghAngularApp").run(["$templateCache",function(a){a.put("views/PaymentOptions.html",'<div class="container" style="margin-top: 10px"> </div>'),a.put("views/citationInfo.html",'<div class="container"> <div class="row"> <div class="col-sm-12"> <h2>Ticket Results</h2> <table class="table table-condensed table-bordered table-hover" ng-if="ctrl.citations.length > 1"> <thead> <th>Ticket #</th> <th>Name</th> <th>DOB</th> <th>Court Date</th> <th>Court Location</th> <th>Violations</th> </thead> <tbody> <tr class="selectableRow" ng-repeat="citation in ctrl.citations" ng-class="{\'selectedRow\' : ctrl.citationSelected(citation)}" ng-click="ctrl.selectCitation(citation)"> <td>{{citation.citation_number}}</td> <td>{{citation.first_name}} {{citation.last_name}}</td> <td>{{citation.date_of_birth}}</td> <td>{{citation.court_date}}</td> <td>{{citation.court_location}}</td> <td> <span ng-repeat="violation in citation.violations" ng-if="ctrl.hasViolations(citation)"> {{violation.violation_description}}<span ng-if="$index < citation.violations.length - 1">, </span> </span> <span class="noViolations" ng-if="!ctrl.hasViolations(citation)"> Violation data unavailable. Please contact your court. </span> </td> </tr> </tbody> </table> <div class="well" id="selectedCitationInfo" ng-if="ctrl.selectedCitation"> <div class="row"> <div class="col-sm-6"> <h3 style="font-size: 2.2em"> {{ctrl.selectedCitation.first_name}} {{ctrl.selectedCitation.last_name}}<br> <small> {{ctrl.selectedCitation.defendant_address}}<br> {{ctrl.selectedCitation.defendant_city}}, {{ctrl.selectedCitation.defendant_state}}<br> </small> </h3> <label>Driver\'s License #</label><br> {{ctrl.selectedCitation.drivers_license_number}} </div> <div class="col-sm-6"> <h3>I Want To...</h3> <button type="button" class="btn btn-success btn-lg" ng-click="ctrl.goToPaymentOptions()"><i class="fa fa-dollar"></i>&nbsp;PAY TICKET</button> <button type="button" class="btn btn-success btn-lg"><i class="fa fa-envelope"></i>&nbsp;EMAIL TICKET INFO</button> <button type="button" class="btn btn-success btn-lg"><i class="fa fa-print"></i>&nbsp;PRINT TICKET INFO</button> </div> </div> <div class="row" style="margin-top: 20px"> <div class="col-sm-6"> <h3>Ticket Info</h3> <dl class="dl-horizontal"> <dt>Ticket Date</dt> <dd>{{ctrl.selectedCitation.citation_date}}</dd> <dt>Total Fine</dt> <dd> <span ng-if="!ctrl.isMissingFineInfo(ctrl.selectedCitation)"> ${{ctrl.getFineTotal(ctrl.selectedCitation)}} </span> <span class="italic" ng-if="ctrl.isMissingFineInfo(ctrl.selectedCitation)"> Fine Info Unavailable </span> </dd> <dt>Total Court Fee</dt> <dd> <span ng-if="!ctrl.isMissingFeeInfo(ctrl.selectedCitation)"> ${{ctrl.getFeeTotal(ctrl.selectedCitation)}} </span> <span class="italic" ng-if="ctrl.isMissingFeeInfo(ctrl.selectedCitation)"> Fee Info Unavailable </span> </dd> </dl> </div> <div class="col-sm-6"> <h3>Court Information</h3> <dl class="dl-horizontal"> <dt>Court Date</dt> <dd>{{ctrl.selectedCitation.court_date}}</dd> <dt>Court Name</dt> <dd>{{ctrl.selectedCitation.court.municipality}}</dd> <dt>Court Location</dt> <dd> {{ctrl.selectedCitation.court.address}}<br> {{ctrl.selectedCitation.court.city}}, {{ctrl.selectedCitation.court.state}} {{ctrl.selectedCitation.court.zip_code}}<br> <a href="{{ctrl.selectedCitation.courtDirectionLink}}" class="btn btn-success" target="_blank">GET DIRECTIONS</a> </dd> </dl> </div> </div> <div class="row"> <div class="col-sm-6"> <h3>Violations</h3> <ul ng-if="ctrl.hasViolations(ctrl.selectedCitation)"> <li ng-repeat="violation in ctrl.selectedCitation.violations"> {{violation.violation_description}} </li> </ul> <span class="noViolations" ng-if="!ctrl.hasViolations(ctrl.selectedCitation)"> Violation data unavailable. Please contact your court. </span> </div> <div class="col-sm-6"> </div> </div> </div> </div> </div> </div>'),
a.put("views/dobPicker.html",'<div> <form id="dobFrm" name="dobFrm" novalidate ng-submit="ctrl.save()" ng-submit-force="true"> <div class="modal-header"> <h3 class="modal-title">Date of Birth</h3> </div> <div class="modal-body"> <label>In order to protect privacy, please provide your date of birth</label> <p class="input-group"> <input type="date" class="form-control" datepicker-popup ng-model="ctrl.dob" is-open="ctrl.status.opened" min-date="ctrl.minDate" max-date="ctrl.maxDate" ng-required="true" close-text="Close" format="MM/dd/yyyy"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="ctrl.open($event)"><i class="fa fa-calendar"></i></button> </span> </p> </div> <div class="modal-footer"> <button class="btn btn-primary" type="submit" ng-disabled="ctrl.dob === null || ctrl.dob === undefined">Find Ticket</button> <button class="btn btn-danger" type="button" ng-click="ctrl.cancel()">Cancel</button> </div> </form> </div>'),a.put("views/formField.html",'<div class="form-group"> <label ng-if="label" class="control-label" ng-attr-for="{{id}}"> {{::label}}&nbsp;<span ng-show="required" class="required">*</span> <span ng-if="info"> &nbsp;<i class="fa fa-info-circle" data-original-title="{{info}}"></i> </span> </label> <div ng-transclude-replace></div> <span class="help-block"></span> </div>'),a.put("views/header.html",'<nav class="navbar navbar-default navbar-fixed-top" ng-controller="HeaderCtrl as ctrl"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" ui-sref="home"> <img src="images/communisee.8a32eb76.png" style="height: 75px"> </a> </div> <div id="navbar" class="collapse navbar-collapse"> <ul class="nav navbar-nav"> <li><a ui-sref="home">Home</a></li> <li ng-if="!ctrl.isAuthenticated()"><a ui-sref="sponsorLogin">Sponsor Login</a></li> <li ng-if="ctrl.isAuthenticated()"><a ui-sref="sponsorMgmt">Manage Opportunities</a></li> </ul> <div class="secondaryAccent" style="position: relative; float: right; font-size: 1.2em; padding-top: 10px" ng-if="ctrl.isAuthenticated()"> Logged in as: {{ctrl.getAuthenticatedSponsor().name}}&nbsp;&nbsp;<button type="button" class="btn btn-danger btn-sm" ng-click="ctrl.logout()">Logout</button> </div> </div><!--/.nav-collapse --> </div> </nav>'),a.put("views/home.html",'<div> <div class="accent"> <div class="container"> <h2 class="secondaryAccent" style="margin-bottom: 20px">Get Ticket Info</h2> <!--<h2><small>Use one of these options:</small></h2>--> <form id="citationCriteriaFrm" name="citationCriteriaFrm" ng-submit="ctrl.getDOB(citationCriteriaFrm)" novalidate ng-submit-force="true"> <div class="row"> <div class="col-md-4"> <div class="thumbnail homepageTile centered" ng-if="!ctrl.isSelected(\'TICKET_NUMBER\')" ng-class="{\'unselected\' : ctrl.isUnselected(\'TICKET_NUMBER\')}" ng-click="ctrl.getTicketWithNumber()"> <h3>Do you have your ticket #?</h3> <div class="homePageTileIcon"> <i class="fa fa-newspaper-o fa-5x"></i> </div> </div> <div class="thumbnail homepageTileSelected" ng-if="ctrl.isSelected(\'TICKET_NUMBER\')"> <span class="primary"><i class="fa fa-newspaper-o fa-lg"></i>&nbsp;Do you have your ticket #?</span><br><br> <form-field label="Ticket #" required> <input type="text" ng-model="ctrl.citationCriteria.citationNumber" required ng-maxlength="12" displayname="Ticket #"> </form-field> </div> <div class="row" style="margin-top: 20px" ng-if="ctrl.isSelected(\'TICKET_NUMBER\')"> <div class="col-sm-12" style="text-align: center"> <button class="btn btn-success btn-lg" ng-disabled="!citationCriteriaFrm.$valid" type="submit"><i class="fa fa-search"></i>&nbsp;&nbsp;FIND TICKET</button> </div> </div> </div> <div class="col-md-4"> <div class="thumbnail homepageTile centered" ng-if="!ctrl.isSelected(\'DRIVER_INFO\')" ng-class="{\'unselected\' : ctrl.isUnselected(\'DRIVER_INFO\')}" ng-click="ctrl.getTicketWithDriverInfo()"> <h3>Do you have your driver\'s license info?</h3> <div class="homePageTileIcon"> <i class="fa fa-car fa-5x"></i> </div> </div> <div class="thumbnail homepageTileSelected" ng-if="ctrl.isSelected(\'DRIVER_INFO\')"> <span class="primary"><i class="fa fa-car fa-lg"></i>&nbsp;Do you have your driver\'s license info?</span><br><br> <form-field label="License #" required> <input type="text" ng-model="ctrl.citationCriteria.licenseNumber" required ng-maxlength="12" displayname="License #"> </form-field> <form-field label="License State" required> <ui-select id="selectedState" name="selectedState" register-custom-form-control displayname="License State" ng-model="ctrl.citationCriteria.licenseState" required> <ui-select-match placeholder="State">{{$select.selected}}</ui-select-match> <ui-select-choices repeat="state in ctrl.states | filter: $select.search"> {{state}} </ui-select-choices> </ui-select> </form-field> </div> <div class="row" style="margin-top: 20px" ng-if="ctrl.isSelected(\'DRIVER_INFO\')"> <div class="col-sm-12" style="text-align: center"> <button class="btn btn-success btn-lg" ng-disabled="!citationCriteriaFrm.$valid" type="submit"><i class="fa fa-search"></i>&nbsp;&nbsp;FIND TICKET</button> </div> </div> </div> <div class="col-md-4"> <div class="thumbnail homepageTile centered" ng-if="!ctrl.isSelected(\'LOCATION\')" ng-class="{\'unselected\' : ctrl.isUnselected(\'LOCATION\')}" ng-click="ctrl.getTicketWithLocation()"> <h3>Where did you get your ticket?</h3> <div class="homePageTileIcon"> <i class="fa fa-map-marker fa-5x"></i> </div> </div> <div class="thumbnail homepageTileSelected" ng-if="ctrl.isSelected(\'LOCATION\')"> <span class="primary"><i class="fa fa-map-marker fa-lg"></i>&nbsp;Where did you get your ticket?</span><br> <form-field label="Last Name" required> <input type="text" ng-model="ctrl.citationCriteria.lastName" required ng-maxlength="20" displayname="Last Name"> </form-field> <form-field required> <ui-select id="selectedMunicipality" multiple name="selectedMunicipality" register-custom-form-control required displayname="Municipality" ng-model="ctrl.citationCriteria.municipalityNames"> <ui-select-match placeholder="Select a City">{{$item.municipality}}</ui-select-match> <ui-select-choices repeat="municipality in ctrl.municipalities | filter: $select.search track by municipality.municipality"> <div ng-bind-html="municipality.municipality | highlight: $select.search"></div> </ui-select-choices> </ui-select> </form-field> <div class="centered"> - OR - <br><br> <button class="btn btn-primary" type="button" ng-click="ctrl.openMap()"><i class="fa fa-map"></i>&nbsp;&nbsp;Select on Map</button> </div> </div> <div class="row" style="margin-top: 20px" ng-if="ctrl.isSelected(\'LOCATION\')"> <div class="col-sm-12" style="text-align: center"> <button class="btn btn-success btn-lg" ng-disabled="!citationCriteriaFrm.$valid" type="submit"><i class="fa fa-search"></i>&nbsp;&nbsp;FIND TICKET</button> </div> </div> </div> </div> </form> </div> </div> </div>'),a.put("views/locationPickerMap.html",'<div> <div class="modal-header"> <h3 class="modal-title">Select Ticketed Location</h3> </div> <div class="modal-body"> <esri-map id="map" map-options="ctrl.map.options" register-as="stlMap"> <esri-feature-layer url="//maps.stlouisco.com/arcgis/rest/services/OpenData/OpenData/FeatureServer/5"></esri-feature-layer> </esri-map> <div style="margin-top: 20px" ng-if="ctrl.selectedMunicipalities.length > 0"> <label>Select Cities</label><br> <span ng-repeat="municip in ctrl.selectedMunicipalities"> {{municip.municipality}}<span ng-if="$index < ctrl.selectedMunicipalities.length - 1">, </span> </span> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" ng-click="ctrl.selectLocation()" ng-disabled="ctrl.selectedMunicipalities.length === 0">Save Selected</button> <button class="btn btn-danger" type="button" ng-click="ctrl.cancel()">Cancel</button> </div> </div>'),a.put("views/opportunityCreate.html",'<div> <form name="createOppFrm" id="createOppFrm" novalidate ng-submit="ctrl.save(createOppFrm)" ng-submit-force="true"> <div class="modal-header"> <h3 class="modal-title">Create Opportunity</h3> </div> <div class="modal-body"> <form-field label="Name" required> <input type="text" ng-model="ctrl.opportunity.name" displayname="Name" ng-maxlength="75" required> </form-field> <form-field label="Short Description" required> <input type="text" ng-model="ctrl.opportunity.shortDescription" displayname="Short Description" ng-maxlength="255" required> </form-field> <form-field label="Full Description" required> <textarea ng-model="ctrl.opportunity.fullDescription" displayname="Full Description" ng-maxlength="1000" required></textarea> </form-field> <form-field label="Municipality" required> <ui-select id="selectedMunicipality" name="selectedMunicipality" register-custom-form-control required displayname="Municipality" ng-model="ctrl.opportunity.courtId"> <ui-select-match placeholder="Select a Municipality">{{$select.selected.municipality}}</ui-select-match> <ui-select-choices repeat="municipality.id as municipality in ctrl.municipalities | filter: $select.search track by municipality.municipality"> <div ng-bind-html="municipality.municipality | highlight: $select.search"></div> </ui-select-choices> </ui-select> </form-field> </div> <div class="modal-footer"> <button class="btn btn-primary" type="submit">Create Opportunity</button> <button class="btn btn-danger" type="button" ng-click="ctrl.cancel()">Cancel</button> </div> </form> </div>'),a.put("views/opportunityDetails.html",'<div class="container" style="margin-top: 10px"> </div>'),a.put("views/sponsorLogin.html",'<div class="container" style="margin-top: 10px"> <form id="sponsorLoginFrm" name="sponsorLoginFrm" ng-submit="ctrl.DoSponsorLogin(sponsorLoginFrm)" novalidate ng-submit-force="true"> <div class="row"> <div class="col-sm-6"> <form-field label="Username:" required> <input type="text" ng-model="ctrl.credentials.userId" required ng-maxlength="20" displayname="Username"> </form-field> <form-field label="Password:" required> <input type="password" ng-model="ctrl.credentials.password" required ng-maxlength="20" displayname="Password"> </form-field> <button class="btn btn-success btn-lg" ng-disabled="!sponsorLoginFrm.$valid" type="submit">LOGIN</button> </div> </div> </form> </div>'),a.put("views/sponsorManagement.html",'<div class="container" style="margin-top: 10px"> <div class="row"> <div class="col-sm-12"> <h2> {{ctrl.sponsor.name}}<br> <small> {{ctrl.sponsor.shortDescription}}<br> <small> {{ctrl.sponsor.contactEmail}}<br> {{ctrl.sponsor.contactPhoneNumber}} </small> </small> </h2> </div> </div> <div class="row" style="margin-top: 20px"> <div class="col-sm-12"> <div style="text-align: right"> <button class="btn btn-success" type="button" ng-click="ctrl.createOpportunity()"><i class="fa fa-plus"></i>&nbsp;Opportunity</button> </div> <table class="table table-condensed table-bordered table-hover" ng-if="ctrl.opportunities.length > 1" style="margin-top: 10px"> <thead> <th>Name</th> <th>Description</th> <th>Municipality</th> <th style="width: 30px"></th> </thead> <tbody> <tr ng-repeat="opportunity in ctrl.opportunities"> <td>{{opportunity.name}}</td> <td>{{opportunity.shortDescription}}</td> <td>{{ctrl.getCourtName(opportunity)}}</td> <td style="text-align: right"><button class="btn btn-primarh btn-sm" type="button" ng-click="ctrl.addNeed(opportunity)"><i class="fa fa-plus"></i>&nbsp;Need</button></td> </tr> </tbody> </table> </div> </div> </div>')}]);